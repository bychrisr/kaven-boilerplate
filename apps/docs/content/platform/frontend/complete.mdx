---
title: Complete Frontend Guide
description: Auto-migrated from legacy documentation
---

# Frontend - Guia de Desenvolvimento

## ğŸ—ï¸ Arquitetura Frontend

### Stack TecnolÃ³gica

- **Framework:** Next.js 14 (App Router)
- **UI:** Tailwind CSS + shadcn/ui
- **State Management:** Zustand
- **Data Fetching:** TanStack Query (React Query)
- **Forms:** React Hook Form + Zod
- **Notifications:** Sonner
- **HTTP Client:** Axios
- **Icons:** Lucide React

---

## ğŸ“ Estrutura de DiretÃ³rios

```
apps/admin/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (auth)/              # Rotas de autenticaÃ§Ã£o (sem layout)
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”œâ”€â”€ register/
â”‚   â”‚   â”œâ”€â”€ forgot-password/
â”‚   â”‚   â”œâ”€â”€ reset-password/
â”‚   â”‚   â”œâ”€â”€ verify-email/
â”‚   â”‚   â””â”€â”€ 2fa-setup/
â”‚   â”‚
â”‚   â””â”€â”€ (dashboard)/         # Rotas do dashboard (com layout)
â”‚       â”œâ”€â”€ page.tsx         # Dashboard home
â”‚       â”œâ”€â”€ users/
â”‚       â”œâ”€â”€ tenants/
â”‚       â”œâ”€â”€ invoices/
â”‚       â””â”€â”€ orders/
â”‚
â”œâ”€â”€ components/              # Componentes reutilizÃ¡veis
â”‚   â”œâ”€â”€ ui/                 # shadcn/ui components
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ hooks/                   # Custom hooks
â”‚   â”œâ”€â”€ use-users.ts        # User management hooks
â”‚   â”œâ”€â”€ use-auth.ts         # Auth hooks (planned)
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ lib/                     # Bibliotecas e utilitÃ¡rios
â”‚   â”œâ”€â”€ api.ts              # Axios client configurado
â”‚   â”œâ”€â”€ errors.ts           # Error handling utilities
â”‚   â””â”€â”€ utils.ts            # shadcn/ui utils
â”‚
â”œâ”€â”€ providers/               # React providers
â”‚   â”œâ”€â”€ query-provider.tsx  # TanStack Query provider
â”‚   â””â”€â”€ toast-provider.tsx  # Sonner toast provider
â”‚
â””â”€â”€ stores/                  # Zustand stores
    â”œâ”€â”€ auth.store.ts       # Authentication state
    â””â”€â”€ ui.store.ts         # UI state (sidebar, theme)
```

---

## ğŸ” AutenticaÃ§Ã£o

### Auth Store (Zustand)

```typescript
import { useAuthStore } from '@/stores/auth.store';

// Usar no componente
const { user, isAuthenticated, setAuth, clearAuth } = useAuthStore();

// Login
setAuth(user, accessToken, refreshToken);

// Logout
clearAuth();
```

**Features:**

- âœ… Persist no localStorage
- âœ… Sync com axios interceptors
- âœ… Type-safe

### API Client (Axios)

```typescript
import api from '@/lib/api';

// Fazer request (token Ã© adicionado automaticamente)
const response = await api.get('/api/users');

// Refresh token automÃ¡tico em caso de 401
// Redirect para /login se refresh falhar
```

**Features:**

- âœ… Auto-inject Authorization header
- âœ… Auto-inject X-Tenant-ID header
- âœ… Refresh token automÃ¡tico
- âœ… Redirect em caso de falha

---

## ğŸ“Š Data Fetching (TanStack Query)

### Setup

```typescript
// app/layout.tsx
import { QueryProvider } from '@/providers/query-provider';

export default function RootLayout({ children }) {
  return (
    <QueryProvider>
      {children}
    </QueryProvider>
  );
}
```

### Usando Hooks

```typescript
import { useUsers, useCreateUser } from '@/hooks/use-users';

function UsersPage() {
  // Query (GET)
  const { data, isLoading, error } = useUsers(page, limit);

  // Mutation (POST/PUT/DELETE)
  const createUser = useCreateUser();

  const handleCreate = async (data) => {
    await createUser.mutateAsync(data);
    // Toast automÃ¡tico de sucesso/erro
    // Cache invalidado automaticamente
  };
}
```

**Features:**

- âœ… Cache automÃ¡tico (1 min stale time)
- âœ… InvalidaÃ§Ã£o automÃ¡tica apÃ³s mutations
- âœ… Toast notifications integradas
- âœ… Error handling type-safe
- âœ… React Query Devtools (dev only)

---

## ğŸ¨ UI State (Zustand)

```typescript
import { useUIStore } from '@/stores/ui.store';

function Sidebar() {
  const { sidebarOpen, toggleSidebar } = useUIStore();

  return (
    <aside className={sidebarOpen ? 'open' : 'closed'}>
      <button onClick={toggleSidebar}>Toggle</button>
    </aside>
  );
}
```

**State disponÃ­vel:**

- `sidebarOpen: boolean`
- `theme: 'light' | 'dark'`
- `toggleSidebar()`
- `setSidebarOpen(open: boolean)`
- `setTheme(theme)`

### Settings Store (Zustand)

```typescript
import { useSettings } from '@/stores/settings.store';

function ThemeToggle() {
  const { theme, toggleTheme } = useSettings();

  return (
    <button onClick={toggleTheme}>
      {theme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸'}
    </button>
  );
}
```

**Features:**

- âœ… PersistÃªncia de tema (Dark/Light)
- âœ… SincronizaÃ§Ã£o automÃ¡tica com Layout
- âœ… IntegraÃ§Ã£o com Tailwind classes

---

## ğŸ“ FormulÃ¡rios (React Hook Form + Zod)

### Exemplo Completo

```typescript
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import { z } from 'zod';

const userSchema = z.object({
  name: z.string().min(3, 'MÃ­nimo 3 caracteres'),
  email: z.string().email('Email invÃ¡lido'),
  password: z.string().min(6, 'MÃ­nimo 6 caracteres'),
  role: z.enum(['USER', 'TENANT_ADMIN']),
});

type UserFormData = z.infer<typeof userSchema>;

function UserForm() {
  const createUser = useCreateUser();

  const form = useForm<UserFormData>({
    resolver: zodResolver(userSchema),
    defaultValues: {
      name: '',
      email: '',
      password: '',
      role: 'USER',
    },
  });

  const onSubmit = async (data: UserFormData) => {
    await createUser.mutateAsync(data);
  };

  return (
    <form onSubmit={form.handleSubmit(onSubmit)}>
      <input {...form.register('name')} />
      {form.formState.errors.name && (
        <span>{form.formState.errors.name.message}</span>
      )}
      {/* ... outros campos */}
      <button type="submit" disabled={createUser.isPending}>
        {createUser.isPending ? 'Criando...' : 'Criar'}
      </button>
    </form>
  );
}
```

---

## ğŸ”” NotificaÃ§Ãµes (Sonner)

### Setup

```typescript
// app/layout.tsx
import { ToastProvider } from '@/providers/toast-provider';

export default function RootLayout({ children }) {
  return (
    <>
      {children}
      <ToastProvider />
    </>
  );
}
```

### Uso

```typescript
import { toast } from 'sonner';

// Success
toast.success('UsuÃ¡rio criado com sucesso!');

// Error
toast.error('Erro ao criar usuÃ¡rio');

// Info
toast.info('Processando...');

// Warning
toast.warning('AtenÃ§Ã£o!');

// Loading
const toastId = toast.loading('Carregando...');
// ... depois
toast.success('ConcluÃ­do!', { id: toastId });
```

**Features:**

- âœ… Position: top-right
- âœ… Rich colors
- âœ… Close button
- âœ… Auto-dismiss (4s)
- âœ… Stacking automÃ¡tico

---

## ğŸ› ï¸ Error Handling

### Type-Safe Error Handling

```typescript
import { getErrorMessage } from '@/lib/errors';

try {
  await api.post('/api/users', data);
} catch (error: unknown) {
  const message = getErrorMessage(error);
  toast.error(message);
}
```

**Helper `getErrorMessage()`:**

- Extrai mensagem de `error.response.data.error`
- Fallback para `error.response.data.message`
- Fallback para `error.message`
- Fallback para "Erro desconhecido"
- Type-safe (aceita `unknown`)

---

## ğŸ¯ PadrÃµes de CÃ³digo

### 1. Componentes

```typescript
'use client'; // Se usar hooks ou interatividade

interface Props {
  title: string;
  onClose: () => void;
}

export function MyComponent({ title, onClose }: Props) {
  return <div>{title}</div>;
}
```

### 2. Hooks Customizados

```typescript
// hooks/use-feature.ts
import { useQuery } from '@tanstack/react-query';

export function useFeature(id: string) {
  return useQuery({
    queryKey: ['feature', id],
    queryFn: async () => {
      const response = await api.get(`/api/feature/${id}`);
      return response.data;
    },
  });
}
```

### 3. API Calls

```typescript
// Sempre usar o api client configurado
import api from '@/lib/api';

// âœ… BOM
const response = await api.get('/api/users');

// âŒ RUIM
const response = await fetch('http://localhost:8000/api/users');
```

### 4. Stores

```typescript
// stores/feature.store.ts
import { create } from 'zustand';

interface FeatureState {
  value: string;
  setValue: (value: string) => void;
}

export const useFeatureStore = create<FeatureState>((set) => ({
  value: '',
  setValue: (value) => set({ value }),
}));
```

---

## ğŸ§ª Testing (Planned)

### Component Tests

```typescript
import { render, screen } from '@testing-library/react';
import { MyComponent } from './MyComponent';

describe('MyComponent', () => {
  it('renders title', () => {
    render(<MyComponent title="Test" />);
    expect(screen.getByText('Test')).toBeInTheDocument();
  });
});
```

### Hook Tests

```typescript
import { renderHook, waitFor } from '@testing-library/react';
import { useUsers } from '@/hooks/use-users';

describe('useUsers', () => {
  it('fetches users', async () => {
    const { result } = renderHook(() => useUsers());

    await waitFor(() => {
      expect(result.current.data).toBeDefined();
    });
  });
});
```

---

## ğŸš€ Performance

### Code Splitting

```typescript
// Lazy load components
import dynamic from 'next/dynamic';

const HeavyComponent = dynamic(() => import('./HeavyComponent'), {
  loading: () => <div>Loading...</div>,
});
```

### Image Optimization

```typescript
import Image from 'next/image';

<Image
  src="/avatar.jpg"
  alt="Avatar"
  width={100}
  height={100}
  priority // Para imagens above-the-fold
/>
```

### Memoization

```typescript
import { useMemo, useCallback } from 'react';

// Valores computados
const filteredUsers = useMemo(() => users.filter((u) => u.active), [users]);

// Callbacks
const handleClick = useCallback(() => console.log(value), [value]);
```

---

## ğŸ“¦ DependÃªncias

### Principais

```json
{
  "@tanstack/react-query": "^5.x",
  "@tanstack/react-query-devtools": "^5.x",
  "zustand": "^4.x",
  "react-hook-form": "^7.x",
  "@hookform/resolvers": "^3.x",
  "zod": "^3.x",
  "sonner": "^1.x",
  "axios": "^1.x",
  "lucide-react": "^0.x"
}
```

### shadcn/ui

```bash
npx shadcn-ui@latest add button
npx shadcn-ui@latest add input
npx shadcn-ui@latest add form
npx shadcn-ui@latest add table
npx shadcn-ui@latest add dialog
```

---

## ğŸ”§ ConfiguraÃ§Ã£o

### Environment Variables

```env
# .env.local
NEXT_PUBLIC_API_URL=http://localhost:8000
```

### TypeScript Config

```json
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./*"]
    }
  }
}
```

---

## ğŸ“ Checklist de Desenvolvimento

### Ao criar novo componente:

- [ ] Definir interface Props
- [ ] Usar 'use client' se necessÃ¡rio
- [ ] Adicionar tipos adequados
- [ ] Implementar error boundaries (se crÃ­tico)
- [ ] Adicionar loading states
- [ ] Testar responsividade
- [ ] Adicionar testes (se crÃ­tico)

### Ao criar novo hook:

- [ ] Definir tipos de retorno
- [ ] Usar TanStack Query para API calls
- [ ] Implementar error handling
- [ ] Adicionar toast notifications
- [ ] Invalidar cache adequadamente
- [ ] Documentar uso

### Ao criar nova pÃ¡gina:

- [ ] Definir metadata (SEO)
- [ ] Implementar loading.tsx
- [ ] Implementar error.tsx
- [ ] Adicionar breadcrumbs
- [ ] Testar autenticaÃ§Ã£o
- [ ] Testar permissÃµes (RBAC)

---

## ğŸ› Debugging

### React Query Devtools

```typescript
// JÃ¡ incluÃ­do no QueryProvider
// Acesse via botÃ£o flutuante no canto inferior
// Mostra: queries, mutations, cache, timeline
```

### Zustand DevTools

```typescript
import { devtools } from 'zustand/middleware';

export const useStore = create(
  devtools((set) => ({
    // ... state
  })),
);
```

### Axios Interceptors

```typescript
// lib/api.ts
// JÃ¡ configurado para logar erros
// Verifique console para detalhes de requests
```

---

## ğŸ“š Recursos

- [Next.js Docs](https://nextjs.org/docs)
- [TanStack Query](https://tanstack.com/query/latest)
- [Zustand](https://docs.pmnd.rs/zustand)
- [React Hook Form](https://react-hook-form.com/)
- [Zod](https://zod.dev/)
- [shadcn/ui](https://ui.shadcn.com/)
- [Tailwind CSS](https://tailwindcss.com/)
