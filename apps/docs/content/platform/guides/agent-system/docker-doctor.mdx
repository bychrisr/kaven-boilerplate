---
title: Docker Doctor
description: Auto-migrated from legacy documentation
---

# üè• Smart Docker Doctor v3.0

O **Smart Docker Doctor** √© um sistema especialista aut√¥nomo escrito em Python, respons√°vel por garantir a sa√∫de dos containers Docker do projeto.

Diferente de scripts simples que apenas reiniciam containers falhos, o Smart Doctor **analisa, diagnostica e cura**.

## üß† Como Funciona

### 1. Monitoramento

O script monitora continuamente o status (`running`, `exited`, `restarting`) e o healthcheck (`healthy`, `unhealthy`) de todos os containers do projeto.

### 2. An√°lise Sem√¢ntica

Se um container apresenta problemas (ex: loop de restart), o Doctor l√™ os √∫ltimos logs (`STDERR/STDOUT`) e aplica **Regex Matching** para encontrar padr√µes de erro conhecidos.

### 3. Diagn√≥stico e Cura

Com base no padr√£o encontrado, ele seleciona uma estrat√©gia da **Knowledge Base**:

| Sintoma (Regex)                  | Diagn√≥stico             | Tratamento (Auto-Fix)                                                                      |
| :------------------------------- | :---------------------- | :----------------------------------------------------------------------------------------- |
| `address already in use`         | **Conflito de Porta**   | For√ßa a recria√ß√£o do container para tentar liberar o bind da porta.                        |
| `password authentication failed` | **Falha de Auth**       | Recria o container para garantir que novas vari√°veis de ambiente (`.env`) sejam aplicadas. |
| `database system is starting up` | **Deep Sleep**          | Entra em modo de espera (Backoff) e aguarda o banco liberar o lock sozinho.                |
| `permission denied`              | **Erro de Permiss√£o**   | Recria o container (geralmente resolve problemas de montagem de volume em dev).            |
| `Module not found`               | **Depend√™ncia Missing** | Instrui rebuild (ou alerta o usu√°rio se n√£o puder resolver sozinho).                       |

## üõ°Ô∏è Seguran√ßa

- **Timeout:** Se o problema n√£o for resolvido ap√≥s 15 tentativas, o Doctor desiste para evitar loops infinitos.
- **Fail-Safe:** Em caso de erro desconhecido, ele tenta um `docker restart` padr√£o como √∫ltimo recurso.

## üíª Uso Manual

Voc√™ pode invocar o m√©dico a qualquer momento:

```bash
python3 .agent/scripts/docker_doctor.py
```

Se tudo estiver bem, voc√™ ver√°: `‚úÖ All systems operational`.
Se houver falhas, ele iniciar√° o tratamento automaticamente.
