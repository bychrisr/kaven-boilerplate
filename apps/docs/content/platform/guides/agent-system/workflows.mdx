---
title: Workflows
description: Auto-migrated from legacy documentation
---

# üìù Workflows

Workflows s√£o o cora√ß√£o da automa√ß√£o no Kaven. Eles s√£o arquivos Markdown que descrevem, passo a passo, como realizar uma tarefa complexa. O agente l√™ esses arquivos e executa os comandos neles contidos.

## üìÇ Localiza√ß√£o

Todos os workflows devem residir em `.agent/workflows/`.

## üèóÔ∏è Estrutura do Arquivo

Um workflow v√°lido deve ter:

1.  **Frontmatter YAML:** Metadados sobre o workflow.
2.  **Steps:** Passos numerados ou se√ß√µes claras.
3.  **Blocos de C√≥digo:** Comandos bash para execu√ß√£o.

### Exemplo Base

```markdown
---
description: Configura√ß√£o inicial do ambiente
---

# Passo 1: Inicializar

\`\`\`bash
source .agent/scripts/utils.sh
.agent/scripts/init_telemetry.sh "meu-workflow" "Descri√ß√£o"

# Opcional: Verificar sa√∫de

python3 .agent/scripts/docker_doctor.py
\`\`\`

# Passo 2: Executar

\`\`\`bash
execute "pnpm install"
\`\`\`
```

## ü™ù Hooks e Utilit√°rios

Sempre inicie seus scripts importando os utilit√°rios:
`source .agent/scripts/utils.sh`

Isso libera o comando `execute "comando"`, que √© vital para a telemetria.

- **Sem `execute`:** O comando roda, mas n√£o √© registrado no relat√≥rio final.
- **Com `execute`:** O comando √© logado, cronometrado e aparece no report.

## üí° Melhores Pr√°ticas

1.  **Idempot√™ncia:** Escreva scripts que podem rodar m√∫ltiplas vezes sem quebrar o ambiente.
    - Ruim: `mkdir pasta` (falha se j√° existir)
    - Bom: `mkdir -p pasta`
2.  **Limpeza:** Se criar arquivos tempor√°rios, remova-os ao final.
3.  **Auto-Docs:** Use coment√°rios no shell script, eles ajudam quem l√™ o workflow manualmente.
4.  **Doctor:** Sempre inclua uma chamada ao `docker_doctor.py` se seu workflow subir containers.
