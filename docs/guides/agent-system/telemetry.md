# ğŸ“Š Telemetria v2.1

O sistema de telemetria do Kaven foi projetado para garantir observabilidade total sobre as aÃ§Ãµes do agente e da infraestrutura.

## ğŸ—ï¸ Arquitetura

O fluxo de dados segue este pipeline:

1.  **Captura (`init_telemetry.sh`):** Inicia uma sessÃ£o de rastreamento.
2.  **Tracking (`utils.sh`):** O wrapper `execute()` intercepta comandos e registra sucesso/falha.
3.  **ConsolidaÃ§Ã£o (`finalize_telemetry.sh`):** Compila dados de arquivos criados, duraÃ§Ã£o e logs.
4.  **Report (`consolidate_workflow_report.sh`):** Gera um documento Markdown rico para consumo humano.

## ğŸ“ PersistÃªncia de Dados

O sistema garante histÃ³rico sem sobrescrita atravÃ©s de duas estratÃ©gias:

### 1. Dados Brutos (`.agent/telemetry/archive/`)

Cada execuÃ§Ã£o gera um arquivo JSON imutÃ¡vel com timestamp:
`exec_1766102345.json`

### 2. HistÃ³rico Agregado (`.agent/telemetry/metrics.json`)

Um arquivo JSON Ãºnico que acumula todas as execuÃ§Ãµes em um array, permitindo anÃ¡lise estatÃ­stica futura (ex: tempo mÃ©dio de build).

### 3. RelatÃ³rios (`.agent/reports/`)

Documentos Markdown gerados por execuÃ§Ã£o: `WORKFLOW_REPORT_<nome>_<data>.md`.

## ğŸ“‘ Recursos do RelatÃ³rio

Os relatÃ³rios gerados (v2.1) incluem:

- **Diagramas Mermaid:** VisualizaÃ§Ã£o grÃ¡fica do status dos containers.
- **Auto-Diagnostics:** Se um container falhar, os logs de erro sÃ£o injetados automaticamente no relatÃ³rio.
- **Links Inteligentes:** Links **relativos** para os arquivos (`../../path`), garantindo que funcionem em qualquer mÃ¡quina que clonar o projeto.
- **AI Validation:** Se um arquivo `.agent/telemetry/walkthrough.md` existir, seu conteÃºdo Ã© injetado automaticamente como uma seÃ§Ã£o de insights no relatÃ³rio final.
- **KPIs:** DuraÃ§Ã£o, Files Created, LOC (Lines of Code).

> **Nota:** Por padrÃ£o, os relatÃ³rios em `.agent/reports/` sÃ£o adicionados ao `.gitignore` para nÃ£o poluir o repositÃ³rio, mas podem ser compartilhados se necessÃ¡rio.

## ğŸ› ï¸ Comandos Ãšteis

### Gerar relatÃ³rio manualmente

Se vocÃª rodou um workflow mas quer regenerar o relatÃ³rio:

```bash
.agent/scripts/consolidate_workflow_report.sh "nome-do-workflow"
```

### Resetar telemetria (Cuidado)

Para limpar todo o histÃ³rico local:

```bash
rm -rf .agent/telemetry/*
rm -rf .agent/reports/*
```
