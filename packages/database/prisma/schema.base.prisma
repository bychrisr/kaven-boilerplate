generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ===========================
// ENUMS
// ===========================

enum TenantStatus {
  ACTIVE
  SUSPENDED
  DELETED
}

enum Role {
  SUPER_ADMIN
  TENANT_ADMIN
  USER
}

enum UserStatus {
  ACTIVE
  PENDING
  BANNED
  REJECTED
}

enum SubscriptionStatus {
  ACTIVE
  CANCELED
  PAST_DUE
  TRIALING
  EXPIRED
}

enum InvoiceStatus {
  DRAFT
  PENDING
  PAID
  OVERDUE
  CANCELED
}

enum OrderStatus {
  PENDING
  PROCESSING
  COMPLETED
  CANCELED
  REFUNDED
}

enum PaymentMethod {
  STRIPE
  PIX
  CREDIT_CARD
  BOLETO
}

enum PaymentStatus {
  PENDING
  COMPLETED
  FAILED
  REFUNDED
}

// ===========================
// PLATFORM CONFIGURATION
// ===========================

model PlatformConfig {
  id           String  @id @default(uuid())
  companyName  String  @default("Kaven SaaS")
  description  String?
  primaryColor String  @default("#00A76F")
  logoUrl      String? // URL do logo principal
  faviconUrl   String? // URL do favicon

  // Configurações Regionais
  language     String @default("pt-BR")
  currency     String @default("BRL")
  numberFormat String @default("1.000,00") // 1.000,00 or 1,000.00
  
  // SEO & Social
  twitterHandle String?
  ogImageUrl    String?

  updatedAt DateTime @updatedAt
}

// ===========================
// CORE MODELS
// ===========================

model Tenant {
  id        String       @id @default(uuid())
  name      String
  slug      String       @unique
  domain    String?      @unique // Para subdomain-based detection
  status    TenantStatus @default(ACTIVE)
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  deletedAt DateTime? // Soft delete

  // Relations
  users         User[]
  subscriptions Subscription[]
  invoices      Invoice[]
  orders        Order[]
  auditLogs     AuditLog[]
  files         File[]
  Plan          Plan[]
  Product       Product[]
  Purchase      Purchase[]
  UsageRecord   UsageRecord[]
  invites       TenantInvite[] @relation("TenantInvites")
  spaces        Space[]        @relation("TenantSpaces")

  @@index([slug])
  @@index([domain])
  @@index([status])
}

model User {
  id               String     @id @default(uuid())
  email            String     @unique
  password         String
  name             String
  phone            String?
  avatar           String? // URL do avatar do usuário
  emailVerified    Boolean    @default(false)
  emailVerifiedAt  DateTime?
  twoFactorEnabled Boolean    @default(false)
  twoFactorSecret  String? // TOTP secret
  backupCodes      String? // JSON array of backup codes
  role             Role       @default(USER)
  status           UserStatus @default(ACTIVE)
  tenantId         String?
  createdAt        DateTime   @default(now())
  updatedAt        DateTime   @updatedAt
  deletedAt        DateTime? // Soft delete
  lastLoginAt      DateTime?

  // Security fields (Axisor Port)
  loginAttempts      Int       @default(0)
  lockedUntil        DateTime?
  lastLoginIp        String?
  lastLoginUserAgent String?
  sessionExpiresAt   DateTime?

  /// Metadata JSON para permissões granulares e preferências do usuário
  /// Estrutura: { internalRole?: string, permissions?: string[], preferences?: object }
  /// Usado para sub-roles do Admin Tenant (ARCHITECT, FINANCE, SUPPORT, MARKETING, DEVOPS)
  /// Exemplo: { "internalRole": "FINANCE", "permissions": ["view:invoices", "manage:refunds"] }
  metadata Json?

  // Relations
  tenant                    Tenant?                    @relation(fields: [tenantId], references: [id])
  refreshTokens             RefreshToken[]
  auditLogs                 AuditLog[]
  files                     File[]
  verificationTokens        VerificationToken[]
  passwordResetTokens       PasswordResetToken[]
  designSystemCustomization DesignSystemCustomization?

  // Security Relations
  securityAuditLogs      SecurityAuditLog[]
  securityConfigsUpdated SecurityConfig[]
  Purchase               Purchase[]

  // Notification Relations
  inAppNotifications        InAppNotification[]
  notificationPreferences   UserNotificationPreferences?
  
  sentInvites               TenantInvite[] @relation("SentInvites")
  userSpaces                UserSpace[]    @relation("UserSpaces")

  @@index([email])
  @@index([tenantId])
  @@index([role])
  @@index([status])
}

model RefreshToken {
  id        String    @id @default(uuid())
  token     String    @unique
  userId    String
  expiresAt DateTime
  createdAt DateTime  @default(now())
  revokedAt DateTime?

  // Relations
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([token])
  @@index([expiresAt])
}

model AuditLog {
  id        String   @id @default(uuid())
  action    String // Ex: "user.created", "tenant.updated"
  entity    String // Ex: "User", "Tenant"
  entityId  String
  userId    String?
  tenantId  String?
  metadata  Json? // Dados adicionais
  ipAddress String?
  userAgent String?
  createdAt DateTime @default(now())

  // Relations
  user   User?   @relation(fields: [userId], references: [id])
  tenant Tenant? @relation(fields: [tenantId], references: [id])

  @@index([userId])
  @@index([tenantId])
  @@index([action])
  @@index([createdAt])
}

// ===========================
// SUBSCRIPTION & BILLING
// ===========================

model Subscription {
  id String @id @default(uuid())

  /// Associated tenant
  tenantId String @unique @map("tenant_id")

  /// Associated plan
  planId String @map("plan_id")

  /// Associated price (specific billing interval)
  priceId String? @map("price_id")

  /// Stripe Customer ID
  stripeCustomerId String? @unique @map("stripe_customer_id")

  /// Stripe Subscription ID
  stripeSubscriptionId String? @unique @map("stripe_subscription_id")

  /// Subscription status
  status SubscriptionStatus @default(TRIALING)

  /// Current billing period start
  currentPeriodStart DateTime? @map("current_period_start")

  /// Current billing period end
  currentPeriodEnd DateTime? @map("current_period_end")

  /// Whether to cancel at period end
  cancelAtPeriodEnd Boolean @default(false) @map("cancel_at_period_end")

  /// Cancellation timestamp
  canceledAt DateTime? @map("canceled_at")

  /// Cancellation reason
  cancelReason String? @map("cancel_reason")

  /// Trial end timestamp
  trialEnd DateTime? @map("trial_end")

  /// Discount/coupon code applied
  discountCode String? @map("discount_code")

  /// Discount percentage (0-100)
  discountPercent Int? @map("discount_percent")

  /// Additional metadata
  metadata Json?

  createdAt DateTime  @default(now()) @map("created_at")
  updatedAt DateTime  @updatedAt @map("updated_at")
  deletedAt DateTime? @map("deleted_at")

  // Relations
  tenant   Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  plan     Plan      @relation(fields: [planId], references: [id], onDelete: Restrict)
  price    Price?    @relation(fields: [priceId], references: [id], onDelete: SetNull)
  invoices Invoice[]

  @@index([tenantId])
  @@index([planId])
  @@index([status])
  @@index([stripeSubscriptionId])
  @@index([currentPeriodEnd])
  @@map("subscriptions")
}

model Invoice {
  id             String        @id @default(uuid())
  tenantId       String
  subscriptionId String?
  invoiceNumber  String        @unique
  status         InvoiceStatus @default(PENDING)
  amountDue      Decimal       @db.Decimal(10, 2)
  amountPaid     Decimal       @default(0) @db.Decimal(10, 2)
  currency       String        @default("BRL")
  dueDate        DateTime
  paidAt         DateTime?
  metadata       Json?
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  deletedAt      DateTime?

  // Relations
  tenant       Tenant        @relation(fields: [tenantId], references: [id])
  subscription Subscription? @relation(fields: [subscriptionId], references: [id])
  payments     Payment[]

  @@index([tenantId])
  @@index([status])
  @@index([invoiceNumber])
  @@index([dueDate])
}

model Order {
  id          String      @id @default(uuid())
  tenantId    String
  orderNumber String      @unique
  status      OrderStatus @default(PENDING)
  totalAmount Decimal     @db.Decimal(10, 2)
  currency    String      @default("BRL")
  metadata    Json? // Items, customer info, etc.
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  deletedAt   DateTime?

  // Relations
  tenant   Tenant    @relation(fields: [tenantId], references: [id])
  payments Payment[]

  @@index([tenantId])
  @@index([status])
  @@index([orderNumber])
}

model Payment {
  id            String        @id @default(uuid())
  invoiceId     String?
  orderId       String?
  amount        Decimal       @db.Decimal(10, 2)
  currency      String        @default("BRL")
  method        PaymentMethod
  status        PaymentStatus @default(PENDING)
  transactionId String?       @unique // Stripe/Pix transaction ID
  pixQrCode     String? // For Pix payments
  pixQrCodeUrl  String?
  metadata      Json?
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  confirmedAt   DateTime?

  // Relations
  invoice Invoice? @relation(fields: [invoiceId], references: [id])
  order   Order?   @relation(fields: [orderId], references: [id])

  @@index([invoiceId])
  @@index([orderId])
  @@index([status])
  @@index([transactionId])
}

// ===========================
// FILE MANAGEMENT
// ===========================

model File {
  id           String    @id @default(uuid())
  filename     String // Nome gerado (único)
  originalName String // Nome original do arquivo
  mimeType     String // ex: image/jpeg, application/pdf
  size         Int // Tamanho em bytes
  path         String // Caminho no filesystem ou S3
  url          String? // URL pública (se aplicável)
  userId       String
  tenantId     String?
  createdAt    DateTime  @default(now())
  deletedAt    DateTime? // Soft delete

  // Relations
  user   User    @relation(fields: [userId], references: [id], onDelete: Cascade)
  tenant Tenant? @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([tenantId])
  @@index([createdAt])
}

model VerificationToken {
  id        String   @id @default(uuid())
  token     String   @unique
  userId    String
  expiresAt DateTime
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([token])
  @@index([userId])
}

model PasswordResetToken {
  id        String   @id @default(uuid())
  token     String   @unique
  userId    String
  expiresAt DateTime
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([token])
  @@index([userId])
}

// ===========================
// DESIGN SYSTEM CUSTOMIZATION
// ===========================

enum DesignSystemType {
  MUI
  HIG
  FLUENT
  SHADCN
}

model DesignSystemCustomization {
  id           String           @id @default(uuid())
  userId       String           @unique
  designSystem DesignSystemType @default(MUI)
  mode         String           @default("light") // "light" or "dark"

  // Color customizations (JSON)
  colorPrimary   String?
  colorSecondary String?
  colorSuccess   String?
  colorWarning   String?
  colorError     String?
  colorInfo      String?

  // Typography customizations
  fontFamily    String?
  fontSizeScale Float?  @default(1.0)

  // Spacing customizations
  spacingScale Float? @default(1.0)

  // Radius customizations
  radiusScale Float? @default(1.0)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([designSystem])
}

// ===========================
// SECURITY MODELS (Axisor Port)
// ===========================

model SecurityConfig {
  id          String   @id @default(uuid())
  key         String   @unique
  value       String
  description String?
  category    String   @default("authentication")
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  updatedBy   String?

  // Relations
  updatedByUser User? @relation(fields: [updatedBy], references: [id])

  @@index([key])
  @@index([isActive])
}

model SecurityAuditLog {
  id        String   @id @default(uuid())
  userId    String?
  action    String
  resource  String?
  ipAddress String?
  userAgent String?
  success   Boolean  @default(true)
  details   Json?
  createdAt DateTime @default(now())

  // Relations
  user User? @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([action])
  @@index([createdAt])
}

// ============================================
// PLANS & PRODUCTS SYSTEM
// ============================================

/// Feature definitions (catalog of all possible features)
model Feature {
  id String @id @default(uuid())

  /// Unique feature code (e.g., "USERS", "STORAGE_MB", "API_ACCESS")
  code String @unique

  /// Display name
  name String

  /// Description for admin/docs
  description String?

  /// Feature type
  type FeatureType @default(BOOLEAN)

  /// Default value for features not explicitly set
  defaultValue String? @map("default_value")

  /// Unit for quota features (e.g., "users", "MB", "calls")
  unit String?

  /// Category for grouping in UI
  category String?

  /// Sort order in UI
  sortOrder Int @default(0) @map("sort_order")

  /// Whether feature is active
  isActive Boolean @default(true) @map("is_active")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  planFeatures   PlanFeature[]
  productEffects ProductEffect[]
  usageRecords   UsageRecord[]

  @@index([code])
  @@index([category])
  @@index([isActive])
  @@map("features")
}

/// Plan definitions (subscription tiers)
model Plan {
  id String @id @default(uuid())

  /// Tenant that owns this plan (null = global/platform plan)
  tenantId String? @map("tenant_id")

  /// Unique plan code (e.g., "free", "basic", "pro", "enterprise")
  code String

  /// Display name
  name String

  /// Description (supports markdown)
  description String?

  /// Plan type
  type PlanType @default(SUBSCRIPTION)

  /// Trial period in days (0 = no trial)
  trialDays Int @default(0) @map("trial_days")

  /// Whether this is the default plan for new tenants
  isDefault Boolean @default(false) @map("is_default")

  /// Whether plan is visible in pricing page
  isPublic Boolean @default(true) @map("is_public")

  /// Whether plan is currently available for purchase
  isActive Boolean @default(true) @map("is_active")

  /// Sort order in pricing page
  sortOrder Int @default(0) @map("sort_order")

  /// Badge/label (e.g., "Popular", "Best Value")
  badge String?

  /// Stripe Product ID (for Stripe sync)
  stripeProductId String? @unique @map("stripe_product_id")

  /// Additional metadata
  metadata Json?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  tenant        Tenant?        @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  prices        Price[]
  features      PlanFeature[]
  subscriptions Subscription[]

  @@unique([tenantId, code])
  @@index([tenantId])
  @@index([isActive])
  @@index([isPublic])
  @@index([sortOrder])
  @@map("plans")
}

/// Price variations for plans (monthly, yearly, etc.)
model Price {
  id String @id @default(uuid())

  /// Associated plan
  planId String @map("plan_id")

  /// Price identifier/code
  code String?

  /// Billing interval
  interval BillingInterval @default(MONTHLY)

  /// Number of intervals (e.g., 3 for quarterly)
  intervalCount Int @default(1) @map("interval_count")

  /// Price amount (in smallest unit, e.g., cents)
  amount Decimal @db.Decimal(10, 2)

  /// Currency code (ISO 4217)
  currency String @default("BRL")

  /// Original price (for showing discounts)
  originalAmount Decimal? @map("original_amount") @db.Decimal(10, 2)

  /// Whether price is currently active
  isActive Boolean @default(true) @map("is_active")

  /// Stripe Price ID
  stripePriceId String? @unique @map("stripe_price_id")

  /// PagueBit Price ID (for future use)
  pagueBitPriceId String? @map("paguebit_price_id")

  /// Additional metadata
  metadata Json?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  plan          Plan           @relation(fields: [planId], references: [id], onDelete: Cascade)
  subscriptions Subscription[]

  @@unique([planId, interval, currency])
  @@index([planId])
  @@index([isActive])
  @@index([currency])
  @@map("prices")
}

/// Features assigned to plans with limits/values
model PlanFeature {
  id String @id @default(uuid())

  /// Associated plan
  planId String @map("plan_id")

  /// Associated feature
  featureId String @map("feature_id")

  /// Whether feature is enabled (for BOOLEAN features)
  enabled Boolean @default(true)

  /// Limit value (for QUOTA features, -1 = unlimited)
  limitValue Int? @map("limit_value")

  /// Custom value (for CUSTOM features)
  customValue String? @map("custom_value")

  /// Override default in UI display
  displayOverride String? @map("display_override")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  plan    Plan    @relation(fields: [planId], references: [id], onDelete: Cascade)
  feature Feature @relation(fields: [featureId], references: [id], onDelete: Cascade)

  @@unique([planId, featureId])
  @@index([planId])
  @@index([featureId])
  @@map("plan_features")
}

/// Products for one-time purchases
model Product {
  id String @id @default(uuid())

  /// Tenant that owns this product (null = global/platform product)
  tenantId String? @map("tenant_id")

  /// Unique product code
  code String

  /// Display name
  name String

  /// Description (supports markdown)
  description String?

  /// Product type
  type ProductType @default(ONE_TIME)

  /// Price amount
  price Decimal @db.Decimal(10, 2)

  /// Currency code
  currency String @default("BRL")

  /// Original price (for showing discounts)
  originalPrice Decimal? @map("original_price") @db.Decimal(10, 2)

  /// Whether product is currently available
  isActive Boolean @default(true) @map("is_active")

  /// Whether product is visible publicly
  isPublic Boolean @default(true) @map("is_public")

  /// Sort order
  sortOrder Int @default(0) @map("sort_order")

  /// Stock quantity (-1 = unlimited)
  stock Int @default(-1)

  /// Maximum purchases per tenant (-1 = unlimited)
  maxPerTenant Int @default(-1) @map("max_per_tenant")

  /// Stripe Product ID
  stripeProductId String? @unique @map("stripe_product_id")

  /// Stripe Price ID
  stripePriceId String? @unique @map("stripe_price_id")

  /// Image URL
  imageUrl String? @map("image_url")

  /// Additional metadata
  metadata Json?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  tenant    Tenant?         @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  effects   ProductEffect[]
  purchases Purchase[]

  @@unique([tenantId, code])
  @@index([tenantId])
  @@index([isActive])
  @@index([type])
  @@map("products")
}

/// Effects that products have on features/quotas
model ProductEffect {
  id String @id @default(uuid())

  /// Associated product
  productId String @map("product_id")

  /// Associated feature
  featureId String @map("feature_id")

  /// Effect type
  effectType EffectType @default(ADD) @map("effect_type")

  /// Value to add/set
  value Int?

  /// Whether effect is permanent (survives subscription changes)
  isPermanent Boolean @default(false) @map("is_permanent")

  /// Duration in days (null = permanent, 0 = until period end)
  durationDays Int? @map("duration_days")

  createdAt DateTime @default(now()) @map("created_at")

  // Relations
  product Product @relation(fields: [productId], references: [id], onDelete: Cascade)
  feature Feature @relation(fields: [featureId], references: [id], onDelete: Cascade)

  @@unique([productId, featureId])
  @@index([productId])
  @@index([featureId])
  @@map("product_effects")
}

/// Purchase records for one-time products
model Purchase {
  id String @id @default(uuid())

  /// Associated tenant
  tenantId String @map("tenant_id")

  /// Associated product
  productId String? @map("product_id")

  /// User who made the purchase
  userId String? @map("user_id")

  /// Purchase status
  status PurchaseStatus @default(PENDING)

  /// Amount paid
  amount Decimal @db.Decimal(10, 2)

  /// Currency
  currency String @default("BRL")

  /// Payment method used
  paymentMethod PaymentMethod @default(PIX) @map("payment_method")

  /// External payment ID (Stripe, PagueBit, etc.)
  externalPaymentId String? @map("external_payment_id")

  /// When effects expire (null = never)
  expiresAt DateTime? @map("expires_at")

  /// Additional metadata
  metadata Json?

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  tenant  Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  product Product? @relation(fields: [productId], references: [id], onDelete: Restrict)
  user    User?    @relation(fields: [userId], references: [id], onDelete: SetNull)

  @@index([tenantId])
  @@index([productId])
  @@index([userId])
  @@index([status])
  @@index([createdAt])
  @@map("purchases")
}

/// Usage tracking for quota features
model UsageRecord {
  id String @id @default(uuid())

  /// Associated tenant
  tenantId String @map("tenant_id")

  /// Associated feature
  featureId String @map("feature_id")

  /// Current usage value
  currentUsage Int @default(0) @map("current_usage")

  /// Period start
  periodStart DateTime @map("period_start")

  /// Period end
  periodEnd DateTime @map("period_end")

  /// Last reset timestamp
  lastReset DateTime @default(now()) @map("last_reset")

  updatedAt DateTime @updatedAt @map("updated_at")

  // Relations
  tenant  Tenant  @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  feature Feature @relation(fields: [featureId], references: [id], onDelete: Cascade)

  @@unique([tenantId, featureId, periodStart])
  @@index([tenantId])
  @@index([featureId])
  @@index([periodEnd])
  @@map("usage_records")
}

// ============================================
// ENUMS FOR PLANS & PRODUCTS
// ============================================

enum FeatureType {
  BOOLEAN // Feature is on/off
  QUOTA // Feature has a numeric limit
  CUSTOM // Feature has a custom string value
}

enum PlanType {
  SUBSCRIPTION // Recurring billing
  LIFETIME // One-time payment, lifetime access
}

enum BillingInterval {
  DAILY
  WEEKLY
  MONTHLY
  QUARTERLY
  YEARLY
  LIFETIME
  FOREVER // Free tier
}

enum ProductType {
  ONE_TIME // Single purchase
  CONSUMABLE // Can be purchased multiple times
  ADD_ON // Adds to subscription
}

enum EffectType {
  ADD // Add value to current limit
  SET // Set absolute value
  MULTIPLY // Multiply current limit
  ENABLE // Enable boolean feature
}

enum PurchaseStatus {
  PENDING
  COMPLETED
  FAILED
  REFUNDED
  EXPIRED
}

model WebhookEvent {
  id String @id @default(uuid())

  /// ID externo do evento (para idempotência)
  externalId String @unique @map("external_id")

  /// Provider (PAGUEBIT, STRIPE, etc)
  provider String

  /// Tipo de evento
  event String

  /// Payload completo
  payload Json

  /// Quando foi processado
  processedAt DateTime? @map("processed_at")

  createdAt DateTime @default(now()) @map("created_at")

  @@index([provider])
  @@index([event])
  @@map("webhook_events")
}

// ===========================
// IN-APP NOTIFICATIONS
// ===========================

model InAppNotification {
  id         String   @id @default(uuid())
  userId     String   @map("user_id")
  type       String   // 'system' | 'user' | 'security' | 'automation' | 'payment'
  priority   String   // 'low' | 'medium' | 'high' | 'critical'
  title      String
  message    String
  metadata   Json?
  read       Boolean  @default(false)
  actionUrl  String?  @map("action_url")
  actionText String?  @map("action_text")
  createdAt  DateTime @default(now()) @map("created_at")

  // Relations
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([type])
  @@index([priority])
  @@index([read])
  @@index([createdAt])
  @@map("in_app_notifications")
}

model UserNotificationPreferences {
  id            String   @id @default(uuid())
  userId        String   @unique @map("user_id")
  inAppEnabled  Boolean  @default(true) @map("in_app_enabled")
  emailEnabled  Boolean  @default(false) @map("email_enabled")
  pushEnabled   Boolean  @default(false) @map("push_enabled")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")

  // Relations
  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("user_notification_preferences")
}

